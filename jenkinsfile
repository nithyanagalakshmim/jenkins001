pipeline {
   agent {
       dockerContainer {
           image 'mcr.microsoft.com/playwright:v1.17.2-focal'
           args '--ipc=host' // Required for Playwright browsers
       }
   }
   stages {
       stage('Install Playwright') {
           steps {
               sh 'npm i -D @playwright/test'
               sh 'npx playwright install'
           }
       }
       stage('Help') {
           steps {
               sh 'npx playwright test --help'
           }
       }
       stage('Test') {
           steps {
               sh 'npx playwright test --list'
               sh 'npx playwright test'
           }
       }
   }
}
